(function(){"use strict";var e={3382:function(e,t,n){var r=n(9242),s=n(3396);const o={id:"app"};function i(e,t){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(n)])}var a=n(89);const u={},l=(0,a.Z)(u,[["render",i]]);var c=l;const d=(0,s._)("div",{class:"ui text container"},[(0,s._)("h1",{class:"ui header"},"Welcome to the NucReport!"),(0,s._)("div",{class:"ui one column grid"},[(0,s._)("div",{class:"column"},[(0,s._)("h3",null,"This service will help you to share & upload maintenance reports for our nuclear station. ")])])],-1);function p(e,t,n,r,o,i){const a=(0,s.up)("page-layout");return(0,s.wg)(),(0,s.j4)(a,null,{default:(0,s.w5)((()=>[d])),_:1})}var h=n(7139);const m={class:"ui inverted segment"},f={class:"ui inverted secondary menu"},g={key:0,href:"/login",class:"active item"},v={key:1,href:"/register",class:"active item"},w={key:2,href:"/home",class:"active item"},_={class:"right menu"};function y(e,t,n,r,o,i){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",m,[(0,s._)("div",f,[i.loggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",g,"Login")),i.loggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",v,"Register")),i.loggedIn?((0,s.wg)(),(0,s.iD)("a",w,"Home")):(0,s.kq)("",!0),(0,s._)("div",_,[(0,s._)("a",{href:"#",onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e)),class:"ui active item"}," Logout ("+(0,h.zw)(this.user)+") ",1)])])]),(0,s.WI)(e.$slots,"default")])}var b={computed:{loggedIn(){return null!=this.$store.state.user},user(){return this.$store.state.user}},methods:{logout(){this.$store.commit("logout")}}};const x=(0,a.Z)(b,[["render",y]]);var k=x,$={components:{PageLayout:k},data(){return{publicPath:"/"}}};const O=(0,a.Z)($,[["render",p]]);var P=O;const I={class:"ui text container"},Z=(0,s._)("div",{class:"ui one column grid"},[(0,s._)("div",{class:"column"},[(0,s._)("h1",{class:"ui header"},"Register")])],-1),U={class:"ui text container"},j={class:"field"},L=(0,s._)("label",null,"Username",-1),S={class:"field"},D=(0,s._)("label",null,"Password",-1),F=(0,s._)("button",{class:"ui button",type:"submit"},"Submit",-1);function R(e,t,n,o,i,a){const u=(0,s.up)("page-layout");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[(0,s._)("div",I,[Z,(0,s._)("div",U,[(0,s._)("form",{onSubmit:t[2]||(t[2]=(...e)=>a.register&&a.register(...e)),class:"ui form",method:"post",action:""},[(0,s._)("div",j,[L,(0,s.wy)((0,s._)("input",{type:"text",required:"",name:"username","onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),placeholder:"user"},null,512),[[r.nr,e.username]])]),(0,s._)("div",S,[D,(0,s.wy)((0,s._)("input",{type:"password",id:"password",required:"",name:"password","onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),placeholder:""},null,512),[[r.nr,e.password]])]),F],32)])])])),_:1})}n(7658);var q={components:{PageLayout:k},methods:{async register(e){e.preventDefault();try{await this.$http.post("register",{username:this.username,password:this.password}),this.$router.push({name:"Login"}).catch((()=>{}))}catch(t){this.$toast.error(JSON.stringify(t.response.data.error),{position:"top-right"})}}},data:function(){return{username:null,password:null}}};const T=(0,a.Z)(q,[["render",R]]);var z=T;const C={class:"ui text container"},N=(0,s._)("div",{class:"ui one column grid"},[(0,s._)("div",{class:"column"},[(0,s._)("h1",{class:"ui header"},"Login")])],-1),V={class:"ui text container"},H={class:"field"},J=(0,s._)("label",null,"username",-1),W={class:"field"},M=(0,s._)("label",null,"Password",-1),Y=(0,s._)("button",{class:"ui button",type:"submit"},"Submit",-1);function E(e,t,n,o,i,a){const u=(0,s.up)("page-layout");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[(0,s._)("div",C,[N,(0,s._)("div",V,[(0,s._)("form",{onSubmit:t[2]||(t[2]=(...e)=>a.login&&a.login(...e)),class:"ui form",method:"post",action:""},[(0,s._)("div",H,[J,(0,s.wy)((0,s._)("input",{type:"text",required:"",name:"username","onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),placeholder:"user"},null,512),[[r.nr,e.username]])]),(0,s._)("div",W,[M,(0,s.wy)((0,s._)("input",{type:"password",id:"password",required:"",name:"password","onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),placeholder:""},null,512),[[r.nr,e.password]])]),Y],32)])])])),_:1})}var K={components:{PageLayout:k},methods:{async login(e){e.preventDefault();try{let e=await this.$http.post("login",{username:this.username,password:this.password});this.$store.commit("login",{user:e.data.username,userId:e.data.id}),this.$router.push({name:"Home"}).catch((()=>{}))}catch(t){this.$toast.error(JSON.stringify(t.response.data.error),{position:"top-right"})}}},data:function(){return{username:null,password:null,error:null,errorVisible:!0}}};const A=(0,a.Z)(K,[["render",E]]);var B=A;const G={class:"ui text container"},Q={class:"ui message"},X=(0,s._)("div",{class:"header"}," Report upload ",-1),ee=(0,s._)("p",null,"Use SFTP to upload your report files",-1),te={id:"host"},ne=(0,s._)("p",null,"The password is the same as your account password. ",-1),re={class:"ui message"},se=(0,s._)("br",null,null,-1),oe={class:"ui text container"},ie=(0,s._)("p",null,"Your files",-1),ae={class:"item"},ue=["href"],le=["href"];function ce(e,t,n,r,o,i){const a=(0,s.up)("page-layout");return(0,s.wg)(),(0,s.j4)(a,null,{default:(0,s.w5)((()=>[(0,s._)("div",G,[(0,s._)("p",null,"Welcome, "+(0,h.zw)(i.user),1),(0,s._)("div",Q,[X,ee,(0,s._)("p",null,[(0,s._)("code",null,[(0,s.Uk)("sftp -P 4222 "+(0,h.zw)(i.user)+"@",1),(0,s._)("span",te,(0,h.zw)(i.host),1)])]),ne]),(0,s._)("div",re,[(0,s.Uk)(" Uploaded new report files ? Reindex your directory to see them! "),(0,s._)("button",{type:"submit",onClick:t[0]||(t[0]=(...e)=>i.reindex&&i.reindex(...e))},"Reindex")])]),se,(0,s._)("div",oe,[ie,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.indexedFiles,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"ui list",key:e.path},[(0,s._)("div",ae,[(0,s._)("a",{href:"/api/file?path="+e.path+"&token="},(0,h.zw)(e.path),9,ue),(0,s.Uk)(" ||| "),(0,s._)("a",{href:"/api/file?path="+e.path+"&token="+e.token},"Share with other engineer!",8,le)])])))),128))])])),_:1})}var de={components:{PageLayout:k},data(){return{indexedFiles:[]}},computed:{user(){return this.$store.state.user},host(){return window.location.hostname}},async mounted(){await this.getIndexedFiles()},methods:{async getIndexedFiles(){try{let e=await this.$http.get("files");this.indexedFiles=e.data}catch(e){this.$toast.error(JSON.stringify(e.response.data.error),{position:"top-right"})}},async reindex(){try{await this.$http.post("reindex"),await this.getIndexedFiles()}catch(e){this.$toast.error(JSON.stringify(e.response.data.error),{position:"top-right"})}}}};const pe=(0,a.Z)(de,[["render",ce]]);var he=pe,me=n(2483);const fe=[{path:"/",name:"Index",component:P},{path:"/register",name:"Register",component:z},{path:"/login",name:"Login",component:B},{path:"/home",name:"Home",component:he}],ge=(0,me.p7)({history:(0,me.PO)("/"),routes:fe});var ve=ge,we=n(65),_e=n(2415),ye=new we.MT({state:{},mutations:{login(e,t){e.user=t.user,e.userId=t.userId},logout(e){e.user=null,e.userId=null}},actions:{},modules:{},plugins:[(0,_e.Z)()]}),be=n(6431),xe=n.n(be),ke=n(5860);let $e="";$e=window.location.origin;const Oe=$e,Pe=`${Oe}/api`;var Ie=n(4311);Ie.Z.defaults.baseURL=Pe,Ie.Z.defaults.withCredentials=!0,ye.$http=Ie.Z;let Ze=(0,r.ri)(c).use(ke.ZP).use(ve).use(ye).use(xe());Ze.config.globalProperties.$http=Ie.Z,Ze.mount("#app")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,s,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],s=e[c][1],o=e[c][2];for(var a=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(a=!1,o<i&&(i=o));if(a){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,i=r[0],a=r[1],u=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(u)var c=u(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkfront"]=self["webpackChunkfront"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(3382)}));r=n.O(r)})();
//# sourceMappingURL=app.2419decf.js.map